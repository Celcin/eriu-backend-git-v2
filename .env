#  =============================================================================
#  SOFTWARE VERSION CENTRAL MANAGEMENT
#  =============================================================================

# FRANKENPHP_TAG			➤ base image tag for Dockerfile FROM dunglas/frankenphp:{tag}
# MYSQL_VERSION				➤ MySQL Docker image tag (mysql:{version})
# REDIS_VERSION				➤ Redis Docker image tag (redis:{version})
# GOTENBERG_VERSION			➤ Gotenberg Docker image tag (gotenberg/gotenberg:{version})
# MAILPIT_VERSION			➤ Mailpit Docker image tag (axllent/mailpit:{version})
# ALPINE_VERSION			➤ Alpine image for env-info debug container

FRANKENPHP_TAG=1-php8.5
MYSQL_VERSION=9.6
REDIS_VERSION=8.6
GOTENBERG_VERSION=8.26
MAILPIT_VERSION=v1.29
ALPINE_VERSION=3.23.3


#  =============================================================================
#  SOFTWARE PORTS CENTRAL MANAGEMENT
#  =============================================================================

# HTTP_HOST_PORT			➤ host port for HTTP traffic
# HTTPS_HOST_TCP_PORT			➤ host port for HTTPS TCP traffic
# HTTPS_HOST_QUIC_PORT			➤ host port for HTTPS QUIC / HTTP3 (UDP)
# HTTP_INTERNAL_PORT			➤ internal Caddy HTTP port (fixed)
# HTTPS_INTERNAL_PORT			➤ internal Caddy HTTPS port (fixed)

# MYSQL_HOST_PORT			➤ host port for database tools (DBeaver, TablePlus, etc.)
# MYSQL_INTERNAL_PORT			➤ internal MySQL port (fixed, used in DATABASE_URL)

# REDIS_HOST_PORT			➤ host port for Redis CLI / GUI tools
# REDIS_INTERNAL_PORT			➤ internal Redis port (fixed, used in REDIS_URL)

# GOTENBERG_HOST_PORT			➤ host port for Gotenberg API access
# GOTENBERG_INTERNAL_PORT		➤ internal Gotenberg port (fixed, used in GOTENBERG_URL)

# MAILPIT_HOST_UI_PORT			➤ host port for Mailpit web interface
# MAILPIT_HOST_SMTP_PORT		➤ host port for SMTP access from host tools
# MAILPIT_INTERNAL_UI_PORT		➤ internal Mailpit UI port (fixed)
# MAILPIT_INTERNAL_SMTP_PORT		➤ internal Mailpit SMTP port (fixed, used in MAILER_DSN)

HTTP_HOST_PORT=8080
HTTPS_HOST_TCP_PORT=8443
HTTPS_HOST_QUIC_PORT=8443
HTTP_INTERNAL_PORT=80
HTTPS_INTERNAL_PORT=443
MYSQL_HOST_PORT=3307
MYSQL_INTERNAL_PORT=3306
REDIS_HOST_PORT=6380
REDIS_INTERNAL_PORT=6379
GOTENBERG_HOST_PORT=3001
GOTENBERG_INTERNAL_PORT=3000
MAILPIT_HOST_UI_PORT=18025
MAILPIT_HOST_SMTP_PORT=11025
MAILPIT_INTERNAL_UI_PORT=8025
MAILPIT_INTERNAL_SMTP_PORT=1025


#  =============================================================================
#  SYMFONY CORE CONFIG
#  =============================================================================

# APP_ENV				➤ Symfony environment (dev/staging/prod)
# APP_DEBUG				➤ enable Symfony debug mode (1 = on, 0 = off)
# APP_SECRET				➤ Symfony CSRF tokens, signed URLs, remember-me cookies

APP_ENV=dev
APP_DEBUG=0
APP_SECRET=MY_APP_SECRET


#  =============================================================================
#  MYSQL CORE CONFIG
#  =============================================================================

# MYSQL_DATABASE			➤ Database name to create on first run
# MYSQL_USER				➤ Application database user
# MYSQL_PASSWORD			➤ Password for MYSQL_USER
# MYSQL_ROOT_PASSWORD			➤ MySQL root password
# DATABASE_URL				➤ Full Doctrine DBAL DSN string

MYSQL_DATABASE=ERIU_DB_NAME
MYSQL_USER=ERIU_DB_USER
MYSQL_PASSWORD=MY_ERIU_DB_PASSWORD
MYSQL_ROOT_PASSWORD=MY_ERIU_DB_ROOT_PASSWORD
DATABASE_URL="mysql://${MYSQL_USER}:${MYSQL_PASSWORD}@eriu-backend-mysql:${MYSQL_INTERNAL_PORT}/${MYSQL_DATABASE}?serverVersion=${MYSQL_VERSION}&charset=utf8mb4"


#  =============================================================================
#  REDIS CORE CONFIG
#  =============================================================================

# REDIS_MAXMEMORY			➤ Redis max memory allocation
# REDIS_URL				➤ Redis connection URL for Symfony cache
# MESSENGER_TRANSPORT_DSN		➤ Redis Streams URL for Symfony Messenger (Beanstalkd replacement)

REDIS_MAXMEMORY=256mb
REDIS_URL="redis://eriu-backend-redis:${REDIS_INTERNAL_PORT}"
MESSENGER_TRANSPORT_DSN="redis://eriu-backend-redis:${REDIS_INTERNAL_PORT}/messages"


#  =============================================================================
#  GOTENBERG CORE CONFIG
#  =============================================================================

# GOTENBERG_TIMEOUT			➤ API request timeout
# GOTENBERG_LOG_LEVEL			➤ Gotenberg log verbosity
# GOTENBERG_CHROMIUM_QUEUE		➤ Max queued Chromium conversion requests
# GOTENBERG_LIBREOFFICE_QUEUE		➤ Max queued LibreOffice conversion requests
# GOTENBERG_URL				➤ Gotenberg API URL for Symfony bundle

GOTENBERG_TIMEOUT=60s
GOTENBERG_LOG_LEVEL=info
GOTENBERG_CHROMIUM_QUEUE=10
GOTENBERG_LIBREOFFICE_QUEUE=10
GOTENBERG_URL="http://eriu-backend-gotenberg:${GOTENBERG_INTERNAL_PORT}"


#  =============================================================================
#  MAILPIT CORE CONFIG
#  =============================================================================

# MAILPIT_MAX_MESSAGES			➤ Max stored emails before oldest are purged
# MAILER_DSN				➤ Symfony Mailer transport DSN

MAILPIT_MAX_MESSAGES=500
MAILER_DSN="smtp://eriu-backend-mailpit:${MAILPIT_INTERNAL_SMTP_PORT}"


#  =============================================================================
#  FRANKENPHP/CADDY CORE CONFIG
#  =============================================================================

# SERVER_NAME				➤ Caddy site address / hostname
# FRANKENPHP_CONFIG			➤ FrankenPHP worker mode config (empty=disabled)
# TRUSTED_PROXIES			➤ IP ranges Symfony trusts for X-Forwarded-* headers
# TRUSTED_HOSTS				➤ Regex of allowed host header values

SERVER_NAME=localhost
FRANKENPHP_CONFIG=
TRUSTED_PROXIES=127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
TRUSTED_HOSTS='^localhost|php$$'


#  =============================================================================
#  AUTHENTICATION HANDLING
#  =============================================================================

# JWT_SECRET_KEY			➤ Path to private PEM key file
# JWT_PUBLIC_KEY			➤ Path to public PEM key file
# JWT_PASSPHRASE			➤ Passphrase used to encrypt/decrypt the private key

JWT_SECRET_KEY=%kernel.project_dir%/config/jwt/private.pem
JWT_PUBLIC_KEY=%kernel.project_dir%/config/jwt/public.pem
JWT_PASSPHRASE=MY_JWT_PASSPHRASE


#  =============================================================================
#  ERROR TRACKING & SENTRY CORE CONFIG
#  =============================================================================

# SENTRY_DSN				➤ Sentry error tracking DSN (empty=disabled)
# DEFAULT_URI				➤ Base URL for Symfony router (used in CLI URL generation)

SENTRY_DSN=
DEFAULT_URI="https://localhost"


#  =============================================================================
#  XDEBUG CORE CONFIG
#  =============================================================================

# XDEBUG_MODE				➤ XDEBUG mode (off/debug/develop/coverage/profile)
# XDEBUG_SESSION			➤ IDE session key for XDEBUG

XDEBUG_MODE=off
XDEBUG_SESSION=PHPSTORM


#  =============================================================================
#  DOCKER CORE CONFIG
#  =============================================================================

# COMPOSE_PROFILES			➤ Active Docker Compose profile (dev/staging/prod)
# COMPOSE_ENV_FILES			➤ Which .env files Docker Compose loads for interpolation
# DOCKER_REGISTRY			➤ Docker registry prefix for pre-built images
# IMAGE_TAG				➤ Docker image tag for pre-built images
# TZ					➤ Container timezone

COMPOSE_PROFILES=dev
COMPOSE_ENV_FILES=.env,.env.local
DOCKER_REGISTRY=
IMAGE_TAG=latest
TZ=UTC